{"ast":null,"code":"import _defineProperty from\"/home/draouil/Documents/Workspaces/VideosProject/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/draouil/Documents/Workspaces/VideosProject/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/draouil/Documents/Workspaces/VideosProject/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"./Global.scss\";import axios from\"axios\";import Modal from\"./Modal\";import Toast from\"./Tosats\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Connexion=function Connexion(_ref){var setToken=_ref.setToken;var textRef=React.useRef();var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,1),value=_React$useState2[0];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),tokenValue=_useState4[0],setTokenValue=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showToast=_useState6[0],setToast=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),infoText=_useState8[0],setInfoText=_useState8[1];useEffect(function(){if(textRef&&textRef.current){textRef.current.style.height=\"0px\";var taHeight=textRef.current.scrollHeight;textRef.current.style.height=taHeight+\"px\";}},[value]);var handleChange=function handleChange(event){var name=event.target.name;var value=event.target.value;setInputs(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},name,value));});};useEffect(function(){return setToken(tokenValue);});var handleSubmit=function handleSubmit(event){event.preventDefault();if(!inputs.Login||!inputs.Password){setInfoText(\"INCORRECT CREDENTIALS: Incorrect Username or password \");setToast(true);}else{axios.post(\"https://Videos-api.onrender.com/users/login\",inputs).then(function(data){var tokenValue={username:data.data.UserName,password:data.data.UserPassword,type:data.data.UserType};localStorage.setItem(\"token\",JSON.stringify(tokenValue));setTokenValue(tokenValue);}).catch(function(er){if(er.response){setInfoText(\"INCORRECT CREDENTIALS: Incorrect Username or password \");if(er)setToast(true);}else if(er.request){setInfoText(\"INCORRECT CREDENTIALS: Incorrect Username or password \");if(er)setToast(true);}else if(er.message){setInfoText(\"INCORRECT CREDENTIALS: Incorrect Username or password \");if(er)setToast(true);}});}};console.log(\"showToast\",showToast);return/*#__PURE__*/_jsxs(\"div\",{className:\"second-block-contact\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Right-Card-contact\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Software-Presentation-contact\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-25\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Login\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-75\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"fname\",name:\"Login\",value:inputs.Login||\"\",onChange:handleChange,placeholder:\"Your Login..\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-25\",children:/*#__PURE__*/_jsx(\"label\",{children:\"Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-75\",children:/*#__PURE__*/_jsx(\"input\",{autoComplete:\"on\",type:\"password\",id:\"password1\",name:\"Password\",value:inputs.Password||\"\",onChange:handleChange,placeholder:\"Your last Password..\"})})]}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\",className:\"btn btn-primary \"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(Modal,{})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"Left-Card-contact\",children:showToast&&/*#__PURE__*/_jsx(Toast,{show:showToast,setToast:setToast,text:infoText})})]});};export default Connexion;","map":{"version":3,"names":["React","useState","useEffect","axios","Modal","Toast","jsx","_jsx","jsxs","_jsxs","Connexion","_ref","setToken","textRef","useRef","_React$useState","_React$useState2","_slicedToArray","value","_useState","_useState2","inputs","setInputs","_useState3","_useState4","tokenValue","setTokenValue","_useState5","_useState6","showToast","setToast","_useState7","_useState8","infoText","setInfoText","current","style","height","taHeight","scrollHeight","handleChange","event","name","target","values","_objectSpread","_defineProperty","handleSubmit","preventDefault","Login","Password","post","then","data","username","UserName","password","UserPassword","type","UserType","localStorage","setItem","JSON","stringify","catch","er","response","request","message","console","log","className","children","onSubmit","id","onChange","placeholder","autoComplete","show","text"],"sources":["/home/draouil/Documents/Workspaces/VideosProject/src/Connexion.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./Global.scss\";\nimport axios from \"axios\";\nimport Modal from \"./Modal\";\nimport Toast from \"./Tosats\";\n\nconst Connexion = ({ setToken }) => {\n  const textRef = React.useRef();\n  const [value] = React.useState();\n  const [inputs, setInputs] = useState({});\n  const [tokenValue, setTokenValue] = useState();\n  const [showToast, setToast] = useState(false);\n  const [infoText, setInfoText] = useState(\"\");\n\n  useEffect(() => {\n    if (textRef && textRef.current) {\n      textRef.current.style.height = \"0px\";\n      const taHeight = textRef.current.scrollHeight;\n      textRef.current.style.height = taHeight + \"px\";\n    }\n  }, [value]);\n\n  const handleChange = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    setInputs((values) => ({ ...values, [name]: value }));\n  };\n  useEffect(() => setToken(tokenValue));\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    if (!inputs.Login || !inputs.Password) {\n      setInfoText(\"INCORRECT CREDENTIALS: Incorrect Username or password \");\n      setToast(true);\n    } else {\n      axios\n        .post(\"https://Videos-api.onrender.com/users/login\", inputs)\n\n        .then((data) => {\n          const tokenValue = {\n            username: data.data.UserName,\n            password: data.data.UserPassword,\n            type: data.data.UserType\n          };\n\n          localStorage.setItem(\"token\", JSON.stringify(tokenValue));\n\n          setTokenValue(tokenValue);\n        })\n        .catch((er) => {\n          if (er.response) {\n            setInfoText(\n              \"INCORRECT CREDENTIALS: Incorrect Username or password \"\n            );\n\n            if (er) setToast(true);\n          } else if (er.request) {\n            setInfoText(\n              \"INCORRECT CREDENTIALS: Incorrect Username or password \"\n            );\n\n            if (er) setToast(true);\n          } else if (er.message) {\n            setInfoText(\n              \"INCORRECT CREDENTIALS: Incorrect Username or password \"\n            );\n\n            if (er) setToast(true);\n          }\n        });\n    }\n  };\n\n  console.log(\"showToast\", showToast);\n  return (\n    <div className=\"second-block-contact\">\n      <div className=\"Right-Card-contact\">\n        <div className=\"Software-Presentation-contact\">\n          <div className=\"container\">\n            <form onSubmit={handleSubmit}>\n              <div className=\"row\">\n                <div className=\"col-25\">\n                  <label>Login</label>\n                </div>\n                <div className=\"col-75\">\n                  <input\n                    type=\"text\"\n                    id=\"fname\"\n                    name=\"Login\"\n                    value={inputs.Login || \"\"}\n                    onChange={handleChange}\n                    placeholder=\"Your Login..\"\n                  ></input>\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-25\">\n                  <label>Password</label>\n                </div>\n                <div className=\"col-75\">\n                  <input\n                    autoComplete=\"on\"\n                    type=\"password\"\n                    id=\"password1\"\n                    name=\"Password\"\n                    value={inputs.Password || \"\"}\n                    onChange={handleChange}\n                    placeholder=\"Your last Password..\"\n                  ></input>\n                </div>\n              </div>{\" \"}\n              <div className=\"row\">\n                <input\n                  type=\"submit\"\n                  value=\"Submit\"\n                  className=\"btn btn-primary \"\n                ></input>\n              </div>\n            </form>\n          </div>\n\n          <div className=\"row\">\n            <Modal></Modal>\n          </div>\n        </div>\n      </div>\n      <div className=\"Left-Card-contact\">\n        {showToast && (\n          <Toast show={showToast} setToast={setToast} text={infoText}></Toast>\n        )}\n      </div>\n    </div>\n  );\n};\nexport default Connexion;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}